desc:MIDI CC Toggle (CrazyJ36)

/*
Mostly stolen from here: https://github.com/r4dian/Reaper-JSFX/blob/master/MIDI_CC_Toggle_Alternator

Makes all CC input from M-Vave Chocolate (Program Change 3 mode) toggle between 0 and 127 each time that midi is received on your midi track.

BEWARE, only use on tracks where your midi channel input is A footswitch that should be set to toggle,
as your midi controller encoders for example would only send the value 0 and 127, and not smooth continuous control.
Also your midi keyboard notes will stay on.

Save in the Effects folder on your resource path (there's a "Show REAPER resource path" action if you dunno where it is) 
Then add "MIDI CC Toggle" to the tracks where you need it.
*/

// Midi only, no audio in or outputs.
in_pin:none
out_pin:none

// Set default value to off.
last_value = 0;

// Don't run init.
@init
ext_noinit = 1;

@block
while (
  midirecv(mpos, msg1, msg2, msg3) ? (
    // if last_value is 0 on midi receive, send 127, and vice versa.
    last_value ? (
      last_value = 0;
      midisend(mpos, msg1, msg2, last_value);
    ) : ( 
      last_value = 127;
      midisend(mpos, msg1, msg2, last_value);
    );
  );
);